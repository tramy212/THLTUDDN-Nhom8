<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Chỉnh sửa sự kiện – Cổng sự kiện DUE</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/assets/css/create_event.css" />
  <link rel="stylesheet" href="/assets/css/dashboard.css">
  <link rel="stylesheet" href="/assets/css/edit_event.css" />
</head>
<body>


<div class="main-content">
   <div class="trang-ch">


  <!-- HEADER -->
  <%- include('partials/header') %>

  <!-- SIDEBAR -->
  <%- include('partials/menu') %>

    <!-- MAIN CONTENT -->
    <main class="event-container">
      <!-- NÚT QUAY LẠI -->
      <div class="event-header">
        <a href="/events" class="btn-back">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
          Quay lại
        </a>
      </div>


      <!-- FORM -->
      <form class="event-form" id="editEventForm">
        <!-- ROW 1 -->
        <div class="form-row">
          <div class="form-group">
            <label>Tên sự kiện</label>
            <input type="text" id="eventName" value="Xây dựng thương hiệu cá nhân" required />
          </div>
          <div class="form-group">
            <label>Đơn vị tổ chức</label>
            <input type="text" id="organizer" value="Khoa Thông kê - Tin học" required />
          </div>
        </div>


        <!-- ROW 2 -->
        <div class="form-row">
          <div class="form-group">
            <label>Mô tả sự kiện</label>
            <textarea id="description" rows="4">"Xây dựng thương hiệu cá nhân" là hành trình giúp bạn hiểu rõ giá trị bản thân, định hình hình ảnh chuyên nghiệp và tạo dấu ấn khác biệt trong học tập, công việc và mạng xã hội. Workshop cung cấp kiến thức và công cụ thực tế để bạn phát triển phong cách riêng, truyền thông hiệu quả và nâng cao uy tín cá nhân trong một thế giới cạnh tranh.</textarea>
          </div>
        </div>


        <!-- ROW 3 -->
        <div class="form-row">
          <div class="form-group">
            <label>Loại sự kiện</label>
            <select id="eventType">
              <option value="Workshop" selected>Workshop</option>
              <option value="Seminar">Seminar</option>
              <option value="Hội thảo">Hội thảo</option>
            </select>
          </div>
          <div class="form-group">
            <label>Số lượng người tham gia</label>
            <div class="number-input">
              <input type="number" id="capacity" value="45" min="1" />
              <div class="number-controls">
                <button type="button" class="inc">+</button>
                <button type="button" class="dec">−</button>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label>Địa chỉ</label>
            <input type="text" id="location" value="Hội trường A" />
          </div>
        </div>


        <!-- NGÀY GIỜ -->
        <div class="form-row">
          <div class="form-group half">
            <label>Ngày bắt đầu</label>
            <div class="date-input-wrapper">
              <input type="text" class="date-input" id="startDate" value="17/11/2025" readonly required />
              <button type="button" class="date-trigger">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <rect x="3" y="4" width="18" height="18" rx="2"/>
                  <line x1="16" y1="2" x2="16" y2="6"/>
                  <line x1="8" y1="2" x2="8" y2="6"/>
                  <line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
              </button>
            </div>
          </div>
          <div class="form-group half">
            <label>Thời gian</label>
            <div class="time-input-wrapper">
              <input type="text" class="time-input" id="startTime" value="8:30" readonly required />
              <button type="button" class="time-trigger">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <circle cx="12" cy="12" r="10"/>
                  <polyline points="12 6 12 12 16 14"/>
                </svg>
              </button>
            </div>
          </div>
        </div>


        <div class="form-row">
          <div class="form-group half">
            <label>Ngày kết thúc</label>
            <div class="date-input-wrapper">
              <input type="text" class="date-input" id="endDate" value="17/11/2025" readonly />
              <button type="button" class="date-trigger">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <rect x="3" y="4" width="18" height="18" rx="2"/>
                  <line x1="16" y1="2" x2="16" y2="6"/>
                  <line x1="8" y1="2" x2="8" y2="6"/>
                  <line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
              </button>
            </div>
          </div>
          <div class="form-group half">
            <label>Thời gian</label>
            <div class="time-input-wrapper">
              <input type="text" class="time-input" id="endTime" value="11:30" readonly />
              <button type="button" class="time-trigger">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <circle cx="12" cy="12" r="10"/>
                  <polyline points="12 6 12 12 16 14"/>
                </svg>
              </button>
            </div>
          </div>
        </div>


        <!-- VAI TRÒ & TÊN KHÁCH MỜI -->
        <div class="form-row">
          <div class="form-group">
            <label>Vai trò</label>
            <input type="text" id="role" value="Diễn giả" />
          </div>
          <div class="form-group">
            <label>Tên khách mời</label>
            <div class="guest-input-wrapper">
              <input type="text" id="guestName" value="Hà Nhật Lam" />
              <button type="button" class="btn-add-guest">+</button>
            </div>
          </div>
        </div>


        <!-- HÌNH ẢNH -->
        <div class="form-group">
          <label>Hình ảnh sự kiện</label>
          <div class="image-upload">
            <label class="upload-area">
              <input type="file" id="eventImage" accept="image/*" hidden />
              <div class="upload-content">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3v-12"/>
                </svg>
                <div class="upload-text">
                  <span>Nhấp để tải lên</span><br>
                  <small>SVG, PNG, JPG (tối đa 5MB)</small>
                </div>
              </div>
            </label>
            <div class="image-preview-container" id="imagePreviewContainer">
              <img src="https://via.placeholder.com/300x150?text=X%C3%82Y+D%E1%BB%B0NG+TH%C6%AF%C6%A0NG+HI%E1%BB%86U+C%C3%81+NH%C3%82N" alt="Preview" />
              <button type="button" class="remove-image">×</button>
            </div>
          </div>
        </div>


        <!-- NÚT LƯU -->
        <div class="form-actions">
          <button type="submit" class="btn-submit">Lưu</button>
        </div>
      </form>
    </main>
  </div>
</div>


<script src="/assets/js/create_event.js"></script>
<script>
  // Fill dữ liệu (giữ nguyên logic)
  const urlParams = new URLSearchParams(window.location.search);
  const eventData = JSON.parse(decodeURIComponent(urlParams.get('data') || '{}'));


  const fields = ['eventName', 'organizer', 'description', 'eventType', 'capacity', 'location', 'startDate', 'startTime', 'endDate', 'endTime', 'role'];
  fields.forEach(id => {
    if (eventData[id.toLowerCase()]) {
      const el = document.getElementById(id);
      if (el) el.value = eventData[id.toLowerCase()];
    }
  });


  if (eventData.guestname) {
    document.getElementById('guestName').value = eventData.guestname;
  }


  if (eventData.image) {
    const container = document.getElementById('imagePreviewContainer');
    const img = container.querySelector('img');
    img.src = eventData.image;
    container.style.display = 'block';
  }


  // Submit
  document.getElementById('editEventForm').onsubmit = e => {
    e.preventDefault();
    alert('Đã lưu thay đổi!');
  };
</script>
</body>
</html>

