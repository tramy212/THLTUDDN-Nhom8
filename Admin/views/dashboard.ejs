<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Cổng sự kiện – DUE</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/assets/css/dashboard.css" />
</head>
<body>
<div class="trang-ch">

  <!-- HEADER -->
  <%- include('partials/header') %>

  <!-- SIDEBAR -->
  <%- include('partials/menu') %>

  <!-- MAIN CONTENT -->
  <div class="main-content" id="mainContent">

    <!-- STATS -->
    <div class="stats-grid">
      <div class="stat-card upcoming">
        <div class="stat-icon upcoming-icon"></div>
        <div class="stat-title">Sự kiện sắp tới</div>
        <div class="stat-value">5</div>
        <div class="stat-compare">So với tháng trước <span class="badge up">+1.34%</span></div>
      </div>
      <div class="stat-card ongoing">
        <div class="stat-icon ongoing-icon"></div>
        <div class="stat-title">Sự kiện đang diễn ra</div>
        <div class="stat-value">2</div>
        <div class="stat-compare">So với tháng trước <span class="badge up">+1.05%</span></div>
      </div>
      <div class="stat-card completed">
        <div class="stat-icon completed-icon"></div>
        <div class="stat-title">Sự kiện đã hoàn thành</div>
        <div class="stat-value">14</div>
        <div class="stat-compare">So với tháng trước <span class="badge up">+2.74%</span></div>
      </div>
      <div class="stat-card cancelled">
        <div class="stat-icon cancelled-icon"></div>
        <div class="stat-title">Sự kiện đã huỷ</div>
        <div class="stat-value">2</div>
        <div class="stat-compare">So với tháng trước <span class="badge up">+0.04%</span></div>
      </div>
    </div>

    <!-- CHARTS ROW -->
    <div class="charts-row">
      <div class="chart-card line-card">
        <div class="chart-header">
          <h3>Lượng người tham gia theo thời gian</h3>
          <select class="dropdown"><option>Theo tháng</option></select>
        </div>
        <div class="line-chart">
          <div class="chart-labels"><span>25</span><span>20</span><span>15</span><span>10</span><span>05</span></div>
          <div class="chart-line"></div>
          <div class="chart-x-axis">
            <span>Tháng 1</span><span>Tháng 2</span><span>Tháng 3</span><span>Tháng 4</span>
            <span>Tháng 5</span><span>Tháng 6</span><span>Tháng 7</span><span>Tháng 8</span>
          </div>
        </div>
      </div>

      <div class="chart-card donut-card">
        <div class="chart-header">
          <h3>Loại sự kiện</h3>
          <p>Phân bổ theo loại sự kiện</p>
          <select class="dropdown"><option>Theo tháng</option></select>
        </div>
        <div class="donut-container">
          <div class="donut-chart">
            <div class="donut-center">Tổng<br><strong>97</strong></div>
          </div>
          <div class="pie-legend">
            <div class="legend-item"><div class="legend-bar bar-workshop"></div><span>Workshop</span><strong>65%</strong></div>
            <div class="legend-item"><div class="legend-bar bar-seminar"></div><span>Hội thảo</span><strong>25%</strong></div>
            <div class="legend-item"><div class="legend-bar bar-khac"></div><span>Khác</span><strong>5%</strong></div>
            <div class="legend-item"><div class="legend-bar bar-other"></div><span>Seminar</span><strong>5%</strong></div>
          </div>
        </div>
      </div>
    </div>

    <!-- BOTTOM ROW -->
    <div class="bottom-row">
      <div class="table-card">
        <div class="table-header">
          <h3>Sự kiện sắp tới</h3>
          <select class="dropdown"><option>Theo tháng</option></select>
        </div>
        <table class="events-table">
          <thead><tr><th>Tên sự kiện</th><th>Ngày</th><th>Địa điểm</th><th>Số đăng ký</th></tr></thead>
          <tbody>
            <tr><td>Kỹ năng lãnh đạo hiệu quả</td><td>1/11/2025</td><td>Hội trường A</td><td>50</td></tr>
            <tr><td>React Workshop 2025</td><td>4/11/2025</td><td>Hội trường A</td><td>59</td></tr>
            <tr><td>Startup Meeting</td><td>8/11/2025</td><td>Hội trường A</td><td>75</td></tr>
            <tr><td>Ứng dụng AI nâng cao chất lượng trong công việc</td><td>14/11/2025</td><td>Hội trường A</td><td>110</td></tr>
          </tbody>
        </table>
      </div>

      <div class="highlight-card">
        <div class="highlight-header">
          <h3>Sự kiện nổi bật</h3>
          <p>Tính đến hôm nay</p>
        </div>
        <div class="highlight-list">
          <div class="highlight-item">
            <div class="highlight-avatar" style="background-image:url('https://i.pravatar.cc/28?img=1');"></div>
            <div class="highlight-info">
              <div class="highlight-title">Làm chủ thời gian – Nâng cao hiệu quả</div>
              <div class="highlight-date">20/10/2025</div>
            </div>
            <div class="rating">4.9 <span class="stars">*****</span></div>
            <button class="view-btn">Xem sự kiện</button>
          </div>
          <div class="highlight-item">
            <div class="highlight-avatar" style="background-image:url('https://i.pravatar.cc/28?img=2');"></div>
            <div class="highlight-info">
              <div class="highlight-title">Khám phá các ứng dụng tiềm năng của CHATGPT</div>
              <div class="highlight-date">15/9/2025</div>
            </div>
            <div class="rating">5.0 <span class="stars">*****</span></div>
            <button class="view-btn">Xem sự kiện</button>
          </div>
          <div class="highlight-item">
            <div class="highlight-avatar" style="background-image:url('https://i.pravatar.cc/28?img=3');"></div>
            <div class="highlight-info">
              <div class="highlight-title">Nâng cao năng lực chuyển đổi số</div>
              <div class="highlight-date">18/9/2025</div>
            </div>
            <div class="rating">4.3 <span class="stars">****</span></div>
            <button class="view-btn">Xem sự kiện</button>
          </div>
          <div class="highlight-item">
            <div class="highlight-avatar" style="background-image:url('https://i.pravatar.cc/28?img=4');"></div>
            <div class="highlight-info">
              <div class="highlight-title">Lập kế hoạch kinh doanh trên 1 trang giấy</div>
              <div class="highlight-date">23/10/2025</div>
            </div>
            <div class="rating">4.9 <span class="stars">*****</span></div>
            <button class="view-btn">Xem sự kiện</button>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- TOOLTIP -->
<div class="tooltip" id="tooltip"></div>

<script>
  const menuToggle = document.getElementById('menuToggle');
  const sidebar = document.getElementById('sidebar');
  const mainContent = document.getElementById('mainContent');
  const searchToggle = document.getElementById('searchToggle');
  const searchWrapper = document.getElementById('searchWrapper');
  const notificationToggle = document.getElementById('notificationToggle');
  const notificationDropdown = document.getElementById('notificationDropdown');
  const tooltip = document.getElementById('tooltip');

  menuToggle.addEventListener('click', () => {
    sidebar.classList.toggle('collapsed');
    mainContent.classList.toggle('expanded');
  });

  searchToggle.addEventListener('click', (e) => {
    e.stopPropagation();
    searchWrapper.classList.toggle('expanded');
    if (searchWrapper.classList.contains('expanded')) {
      setTimeout(() => searchWrapper.querySelector('input').focus(), 150);
    }
  });

  document.addEventListener('click', (e) => {
    if (!searchWrapper.contains(e.target)) searchWrapper.classList.remove('expanded');
    if (!notificationToggle.contains(e.target) && !notificationDropdown.contains(e.target)) {
      notificationDropdown.classList.remove('show');
    }
  });

  notificationToggle.addEventListener('click', (e) => {
    e.stopPropagation();
    notificationDropdown.classList.toggle('show');
  });

  document.querySelectorAll('[data-tooltip]').forEach(el => {
    el.addEventListener('mouseenter', () => {
      if (sidebar.classList.contains('collapsed')) {
        tooltip.textContent = el.dataset.tooltip;
        tooltip.classList.add('show');
        const rect = el.getBoundingClientRect();
        tooltip.style.top = `${rect.top + rect.height / 2 - tooltip.offsetHeight / 2}px`;
        tooltip.style.left = `${rect.right + 8}px`;
      }
    });
    el.addEventListener('mouseleave', () => tooltip.classList.remove('show'));
  });
</script>
</body>
</html>